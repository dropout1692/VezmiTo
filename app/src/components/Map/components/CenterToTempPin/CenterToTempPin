import { useEffect } from 'react'
import { useMap } from 'react-leaflet'
import {
  selectSelectedSubmissionId,
  usePageSelector,
  selectZoom,
} from '../../../../store/features/page/pageSlice'
import {
  selectSubmissionById,
  useSubmissionSelector,
} from '../../../../store/features/submissions/submissionsSlice'
import { stringify } from '../../../../libs/tools/stringify'

export const CenterToTempPin = () => {
  const map = useMap()
  const selectedSubmissionId = usePageSelector(selectSelectedSubmissionId)
  const selectedSubmission = useSubmissionSelector((state) =>
    selectSubmissionById(state, selectedSubmissionId),
  )
  const zoom = usePageSelector(selectZoom)

  useEffect(() => {
    if (selectedSubmissionId) {
      map.flyTo(
        [
          selectedSubmission.location.latitude,
          selectedSubmission.location.longitude,
        ],
        18,
        {
          animate: false,
        },
      )
    }
  }, [selectedSubmissionId, zoom])

  return null
}
